{"version":3,"sources":["webpack:///./src/services/role.service.js","webpack:///src/views/project/src/project/select.user.vue","webpack:///./src/views/project/src/project/select.user.vue?224a","webpack:///./src/views/project/src/project/select.user.vue","webpack:///src/views/project/src/project/edit.member.dialog.vue","webpack:///./src/views/project/src/project/edit.member.dialog.vue?5e16","webpack:///./src/views/project/src/project/edit.member.dialog.vue","webpack:///src/views/project/src/project/members.vue","webpack:///./src/views/project/src/project/members.vue?ee7a","webpack:///./src/views/project/src/project/members.vue"],"names":["role_service_getRoles","params","arguments","length","undefined","config","Object","http_base","extends_default","isRemoveField","select_user","props","members","type","Array","default","value","String","data","keyword","watch","immediate","handler","val","this","computed","userIds","map","user","id","methods","handleSelect","args","$emit","querySearchAsync","queryString","cb","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","_ref","list","wrap","_context","prev","next","user_service","kw","sent","filter","indexOf","stop","resultlight","qry","iQuery","RegExp","toString","replace","matchedTxt","project_select_user","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","size","popper-class","fetch-suggestions","placeholder","on","select","scopedSlots","_u","key","fn","ref","item","domProps","innerHTML","_s","username","model","callback","$$v","expression","slot","staticRenderFns","src_project_select_user","__webpack_require__","normalizeComponent","ssrContext","edit_member_dialog","visible","Boolean","roles","member","form","initForm","assign_default","onOk","$refs","validate","valid","onCancel","role","project_edit_member_dialog","width","title","before-close","append-to-body","label","style","$set","_l","index","_v","click","components","SelectUser","EditMemberDialog","edit_member_dialog_normalizeComponent","required","breadcrumbData","to","name","defaultIcon","role_id","global_config","project","editDialogVisible","editCurrentMember","created","getProject","isNew","handleFilterSelect","addMember","newMember","user_id","updateProject","project_service","_this2","_callee2","_context2","console","log","requestForm","getRoles","_this3","_callee3","_ref2","_context3","concat","editItem","deleteItem","confirm","project_members","label-width","src","avatar","icon","circle","update:visible","$event","members_Component","members_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/2.832e48631b8f95d3134a.js","sourcesContent":["import {get, post, put, Delete} from '@/bases/http.base'\n\n/**\n *\n * 获取角色列表\n * @export\n * @param {any} [params={}]\n * @returns Promise\n */\nexport function getRoles (params = {}, config = {}) {\n  return get('role/', params, {\n    ...config,\n    isRemoveField: true\n  })\n}\n\n/**\n *\n * 获取角色\n * @export\n * @param {any} [params={}]\n * @returns Promise\n */\nexport function getRole (id, params = {}, config = {}) {\n  return get(`role/${id}`, params, config)\n}\n\n/**\n *\n * 新增角色\n * @export\n * @param {any} [params={}]\n * @returns Promise\n */\nexport function addRole (params = {}) {\n  return post('role', params)\n}\n\n/**\n *\n * 更新角色\n * @export\n * @param {any} [params={}]\n * @returns Promise\n */\nexport function updateRole (id, params = {}) {\n  return put(`role/${id}`, params)\n}\n\n/**\n *\n * 删除角色\n * @export\n * @param {any} [params={}]\n * @returns Promise\n */\nexport function deleteRole (id, params = {}) {\n  return Delete(`role/${id}`, params)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/role.service.js","<template>\n   <div class=\"wl-project-search\">\n    <el-autocomplete\n      size=\"small\"\n      v-model=\"keyword\"\n      popper-class=\"wl-project-search__input\"\n      :fetch-suggestions=\"querySearchAsync\"\n      placeholder=\"请输入用户名\"\n      @select=\"handleSelect\">\n      <template slot-scope=\"{ item }\">\n        <span v-html=\"resultlight(item.username, keyword)\"></span>\n      </template>\n      <template slot=\"suffix\">\n        <i class=\"el-icon-search\"></i>\n      </template>\n    </el-autocomplete>\n   </div>\n</template>\n<script>\nimport {getUsers} from '@/services/user.service'\nexport default {\n  props: {\n    members: {\n      type: Array,\n      default: () => []\n    },\n    value: String\n  },\n  data () {\n    return {\n      keyword: ''\n    }\n  },\n  watch: {\n    value: {\n      immediate: true,\n      handler (val) {\n        this.keyword = val\n      }\n    }\n  },\n  computed: {\n    userIds () {\n      return this.members.map(user => user.id)\n    }\n  },\n  methods: {\n    handleSelect (args) {\n      this.$emit('select', args)\n    },\n    async querySearchAsync (queryString, cb) {\n      let {data: {list}} = await getUsers({\n        kw: queryString\n      })\n      cb(list.filter(user => {\n        return this.userIds.indexOf(user.id) === -1\n      }))\n    },\n    resultlight (value, qry) {\n      if (!value) {\n        return ''\n      }\n      if (!qry) {\n        return value\n      }\n      const iQuery = new RegExp(qry, 'ig')\n      return value.toString().replace(iQuery, function (matchedTxt) {\n        return ('<span class=\\'highlight\\'>' + matchedTxt + '</span>')\n      })\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n@import 'scss';\n\n@include b(project-search) {\n  .el-autocomplete {\n    width: 400px;\n  }\n  @include e(input) {\n    .highlight {\n        color: $primary;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/project/src/project/select.user.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wl-project-search\"},[_c('el-autocomplete',{attrs:{\"size\":\"small\",\"popper-class\":\"wl-project-search__input\",\"fetch-suggestions\":_vm.querySearchAsync,\"placeholder\":\"请输入用户名\"},on:{\"select\":_vm.handleSelect},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.resultlight(item.username, _vm.keyword))}})]}}]),model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}},[_c('template',{slot:\"suffix\"},[_c('i',{staticClass:\"el-icon-search\"})])],2)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-388f686b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/project/src/project/select.user.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-388f686b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./select.user.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./select.user.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./select.user.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-388f686b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./select.user.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/project/src/project/select.user.vue\n// module id = null\n// module chunks = ","<template>\n    <el-dialog\n        class=\"wl-edit-member\"\n        width = \"600px\"\n        title = \"编辑成员\"\n        :visible=\"visible\"\n        :before-close=\"onCancel\"\n        :append-to-body=\"true\">\n        <el-form :model=\"form\" ref=\"form\">\n          <el-form-item label=\"成员角色\">\n            <el-select size=\"small\" v-model=\"form.role\" placeholder=\"请分配角色\" :style=\"{width: '400px'}\">\n                <el-option v-for=\"(role, index) in roles\" :key=\"index\" :label=\"role\" :value=\"index\"></el-option>\n            </el-select>\n          </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button size=\"small\" type=\"primary\" @click=\"onOk\">确定</el-button>\n          <el-button size=\"small\" @click=\"onCancel\">取消</el-button>\n        </div>\n      </el-dialog>\n</template>\n\n<script>\nexport default {\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    roles: {\n      type: Object\n    }, // 角色列表\n    member: Object // 用户信息\n  },\n  data () {\n    return {\n      form: this.initForm()\n    }\n  },\n  watch: {\n    member (val) {\n      if (val) {\n        Object.assign(this.form, {\n          ...val\n        })\n      } else {\n        this.form = this.initForm()\n      }\n    }\n  },\n  methods: {\n    onOk () {\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          this.$emit('update:visible')\n          this.$emit('confirm', this.form)\n        } else {\n          return false\n        }\n      })\n    },\n    onCancel () {\n      this.$emit('update:visible')\n      this.$emit('close')\n    },\n    initForm () {\n      return {\n        role: ''\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import 'scss';\n\n@include b(edit-member) {\n    .el-dialog__header {\n        background: #fff;\n        border-bottom: 1px solid #e8e8e8;\n        border-radius: 4px 4px 0 0;\n        color: rgba(0,0,0,.65);\n        padding: 16px 24px;\n    }\n\n    .el-dialog__body {\n        padding-right: 100px;\n    }\n\n    .el-dialog__footer {\n        border-radius: 0 0 4px 4px;\n        border-top: 1px solid #e8e8e8;\n        padding: 10px 16px;\n        text-align: right;\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/project/src/project/edit.member.dialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{staticClass:\"wl-edit-member\",attrs:{\"width\":\"600px\",\"title\":\"编辑成员\",\"visible\":_vm.visible,\"before-close\":_vm.onCancel,\"append-to-body\":true}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"成员角色\"}},[_c('el-select',{style:({width: '400px'}),attrs:{\"size\":\"small\",\"placeholder\":\"请分配角色\"},model:{value:(_vm.form.role),callback:function ($$v) {_vm.$set(_vm.form, \"role\", $$v)},expression:\"form.role\"}},_vm._l((_vm.roles),function(role,index){return _c('el-option',{key:index,attrs:{\"label\":role,\"value\":index}})}))],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.onOk}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.onCancel}},[_vm._v(\"取消\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b8445b6a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/project/src/project/edit.member.dialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b8445b6a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./edit.member.dialog.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit.member.dialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit.member.dialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b8445b6a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./edit.member.dialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/project/src/project/edit.member.dialog.vue\n// module id = null\n// module chunks = ","<template>\n    <div class=\"wl-project-member\">\n        <wl-breadcrumb :data=\"breadcrumbData\"></wl-breadcrumb>\n        <el-card>\n            <div class=\"wl-project-member__add-header\">\n                添加成员\n            </div>\n            <div class=\"wl-project-member__add-body\">\n                <el-form ref=\"form\" :model=\"form\" label-width=\"80px\" size=\"small\">\n                    <el-form-item label=\"成员名称\">\n                        <select-user @select=\"handleFilterSelect\" :members=\"members\" :value=\"form.username\"></select-user>\n                    </el-form-item>\n                    <el-form-item label=\"成员角色\">\n                        <el-select size=\"small\" v-model=\"form.role_id\" placeholder=\"请分配角色\" :style=\"{width: '400px'}\">\n                            <el-option v-for=\"(role, index) in roles\" :key=\"index\" :label=\"role\" :value=\"index\"></el-option>\n                        </el-select>\n                    </el-form-item>\n                </el-form>\n            </div>\n            <div class=\"wl-project-member__add-footer\">\n                <el-button type=\"primary\" size=\"small\" @click=\"addMember\">添加</el-button>\n            </div>\n        </el-card>\n        <div class=\"wl-project-member__list-container\">\n            <div class=\"wl-project-member__add-header\">{{`成员列表 (${members.length})`}}</div>\n            <div>\n              <div class=\"wl-project-member__user-row\" v-for=\"user in members\" :key=\"user.id\">\n                    <div class=\"wl-project-member__user-info\">\n                        <img class=\"icon\" :src=\"user.avatar || defaultIcon\"/>\n                        <span class=\"wl-group-users__name\">{{user.username}}</span>\n                    </div>\n                    <div class=\"wl-project-member__tool\">\n                      <span class=\"role-name\">{{roles[user.role]}}</span>\n                      <el-button type=\"primary\" size=\"small\" icon=\"el-icon-edit\" circle @click=\"()=>{editItem(user)}\"></el-button>\n                      <el-button type=\"danger\" size=\"small\" icon=\"el-icon-delete\" circle @click=\"()=>{deleteItem(user)}\"></el-button>\n                    </div>\n              </div>\n            </div>\n        </div>\n        <edit-member-dialog :visible.sync=\"editDialogVisible\" :roles=\"roles\" :member=\"editCurrentMember\" @confirm=\"confirm\"></edit-member-dialog>\n    </div>\n</template>\n\n<script>\nimport {getProject, updateProjectMembers} from '@/services/project.service'\nimport {getRoles} from '@/services/role.service'\nimport {ROLES} from '@/config/global.config'\nimport SelectUser from './select.user.vue'\nimport EditMemberDialog from './edit.member.dialog.vue'\n\nconst defaultIcon = 'https://gw.alipayobjects.com/zos/rmsportal/eHBsAsOrrJcnvFlnzNTT.png'\nexport default {\n  components: {SelectUser, EditMemberDialog},\n  props: {\n    id: {\n      type: String,\n      required: true\n    }\n  },\n  data () {\n    return {\n      breadcrumbData: [\n        {\n          to: '/project/index',\n          name: '项目'\n        },\n        {\n          to: '',\n          name: '成员管理'\n        }\n      ],\n      defaultIcon,\n      form: {\n        username: '',\n        role_id: ''\n      },\n      members: [], // 当前项目的成员列表\n      roles: ROLES,\n      project: null, // 当前项目信息\n      editDialogVisible: false,\n      editCurrentMember: null\n    }\n  },\n  created () {\n    this.getProject()\n    // this.getRoles()\n  },\n  computed: {\n    isNew () {\n      return this.id === undefined\n    }\n  },\n  methods: {\n    handleFilterSelect (user) {\n      Object.assign(this.form, {\n        ...user\n      })\n    },\n    addMember () {\n      let newMember = [{\n        user_id: this.form.user_id,\n        role: this.form.role_id\n      }]\n      this.updateProject(newMember)\n      this.form = {\n        username: '',\n        role_id: ''\n      }\n    },\n    async getProject () {\n      let {data} = await getProject(this.id)\n      this.project = data\n      this.members = data.members || []\n    },\n    async updateProject (newMember = []) {\n      console.log('requestForm', this.requestForm(newMember))\n      await updateProjectMembers(this.id, this.requestForm(newMember))\n      this.getProject()\n    },\n    async getRoles () {\n      let {data: {list}} = await getRoles()\n      this.roles = list\n    },\n    requestForm (newMember) {\n      return [].concat(this.members, newMember)\n    },\n    editItem (item) {\n      this.editDialogVisible = true\n      this.editCurrentMember = item\n    },\n    deleteItem (item) {\n      let {id} = item\n      this.members = this.members.filter(item => {\n        return item.id !== id\n      })\n      this.updateProject()\n    },\n    confirm (form) {\n      Object.assign(this.editCurrentMember, {\n        ...form\n      })\n      this.updateProject()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import 'scss';\n\n@include b(project-member) {\n   margin: 20px;\n   box-sizing: border-box;\n   background: #fff;\n   min-height: calc(100% - 40px);\n   padding: 10px;\n   display: flex;\n   flex-direction: column;\n\n   .el-card__body {\n       padding: 0;\n   }\n\n   @include e(add-header) {\n       border-bottom: 1px solid #ebeef5;\n       padding: 0 20px;\n       background: #fafafa;\n       color: #5c5c5c;\n       font-size: 15px;\n       line-height: 50px;\n   }\n\n   @include e(add-footer) {\n       border-top: 1px solid #ebeef5;\n       display: flex;\n       justify-content: space-between;\n       align-items: center;\n       height: 50px;\n       padding: 0 20px;\n       background: #fafafa;\n   }\n\n   @include e(add-body) {\n       padding: 20px;\n   }\n\n   @include e(list-container) {\n       border: 1px solid #ebeef5;\n       border-radius: 4px;\n       margin-top: 20px;\n   }\n\n   @include e(user-row) {\n     display: flex;\n     justify-content: space-between;\n     align-items: center;\n     padding: 10px 20px;\n     border-bottom: 1px solid #ebeef5;\n   }\n\n   @include e(user-info) {\n       display: flex;\n       justify-content: flex-start;\n       align-items: center;\n\n       .icon {\n         width: 24px;\n         height: 24px;\n         margin-right: 10px;\n       }\n  }\n\n  @include e(tool) {\n    .role-name {\n      margin-right: 10px;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/project/src/project/members.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wl-project-member\"},[_c('wl-breadcrumb',{attrs:{\"data\":_vm.breadcrumbData}}),_vm._v(\" \"),_c('el-card',[_c('div',{staticClass:\"wl-project-member__add-header\"},[_vm._v(\"\\n            添加成员\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"wl-project-member__add-body\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\",\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":\"成员名称\"}},[_c('select-user',{attrs:{\"members\":_vm.members,\"value\":_vm.form.username},on:{\"select\":_vm.handleFilterSelect}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"成员角色\"}},[_c('el-select',{style:({width: '400px'}),attrs:{\"size\":\"small\",\"placeholder\":\"请分配角色\"},model:{value:(_vm.form.role_id),callback:function ($$v) {_vm.$set(_vm.form, \"role_id\", $$v)},expression:\"form.role_id\"}},_vm._l((_vm.roles),function(role,index){return _c('el-option',{key:index,attrs:{\"label\":role,\"value\":index}})}))],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"wl-project-member__add-footer\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.addMember}},[_vm._v(\"添加\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"wl-project-member__list-container\"},[_c('div',{staticClass:\"wl-project-member__add-header\"},[_vm._v(_vm._s((\"成员列表 (\" + (_vm.members.length) + \")\")))]),_vm._v(\" \"),_c('div',_vm._l((_vm.members),function(user){return _c('div',{key:user.id,staticClass:\"wl-project-member__user-row\"},[_c('div',{staticClass:\"wl-project-member__user-info\"},[_c('img',{staticClass:\"icon\",attrs:{\"src\":user.avatar || _vm.defaultIcon}}),_vm._v(\" \"),_c('span',{staticClass:\"wl-group-users__name\"},[_vm._v(_vm._s(user.username))])]),_vm._v(\" \"),_c('div',{staticClass:\"wl-project-member__tool\"},[_c('span',{staticClass:\"role-name\"},[_vm._v(_vm._s(_vm.roles[user.role]))]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-edit\",\"circle\":\"\"},on:{\"click\":function (){_vm.editItem(user)}}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function (){_vm.deleteItem(user)}}})],1)])}))]),_vm._v(\" \"),_c('edit-member-dialog',{attrs:{\"visible\":_vm.editDialogVisible,\"roles\":_vm.roles,\"member\":_vm.editCurrentMember},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"confirm\":_vm.confirm}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5f16e3a0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/project/src/project/members.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5f16e3a0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./members.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./members.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./members.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5f16e3a0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./members.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/project/src/project/members.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}