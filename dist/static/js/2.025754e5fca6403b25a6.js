webpackJsonp([2],{FWdX:function(e,t){},MUDm:function(e,t,r){"use strict";t.d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.b)("group/",e,{isRemoveField:!0,target:".wl-table"})},t.c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.b)("group/"+e,t)},t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.c)("group/",e,{headers:{"content-type":"multipart/form-data"},transformRequest:[function(e){return a.a.stringify(e)}]})},t.e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.d)("group/"+e,t,{headers:{"content-type":"multipart/form-data"},transformRequest:[function(e){return a.a.stringify(e)}]})},t.b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.a)("group/"+e,t)};var n=r("diZN"),s=r("mw3O"),a=r.n(s)},P5hJ:function(e,t){},nuu8:function(e,t){},wppp:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("Xxa5"),s=r.n(n),a=r("exGp"),u=r.n(a),i=function(e,t){for(var r=0,n=[];r<e.length;)n.push(e.slice(r,r+=t));return n},o={props:{value:Array},data:function(){return{data:i(this.value,4),defaultIcon:"https://gw.alipayobjects.com/zos/rmsportal/eHBsAsOrrJcnvFlnzNTT.png"}},watch:{value:function(e){this.data=i(e,4)}},methods:{deleteUser:function(e,t,r){this.value.splice(4*t+r,1),this.$emit("input",this.value)}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wl-group-users"},e._l(e.data,function(t,n){return r("el-row",{key:n,attrs:{gutter:20}},e._l(t,function(t,s){return r("el-col",{key:"user_"+t.id,attrs:{span:6}},[r("span",{staticClass:"item"},[r("img",{staticClass:"icon",attrs:{src:t.avatar||e.defaultIcon}}),e._v(" "),r("span",{staticClass:"wl-group-users__name"},[e._v(e._s(t.username))]),e._v(" "),r("i",{staticClass:"wl-icon-delete close",on:{click:function(){e.deleteUser(t,n,s)}}})])])}))}))},staticRenderFns:[]};var l=r("VU/8")(o,c,!1,function(e){r("FWdX")},null,null).exports,p=r("4MTg"),d={props:{groupUserList:{type:Array,default:function(){return[]}}},data:function(){return{keyword:""}},computed:{userIds:function(){return this.groupUserList.map(function(e){return e.id})}},methods:{handleSelect:function(e){this.keyword="",this.$emit("select",e)},querySearchAsync:function(e,t){var r=this;return u()(s.a.mark(function n(){var a,u;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(p.c)({kw:e});case 2:a=n.sent,u=a.data.list,t(u.filter(function(e){return-1===r.userIds.indexOf(e.id)}));case 5:case"end":return n.stop()}},n,r)}))()},resultlight:function(e,t){if(!e)return"";if(!t)return e;var r=new RegExp(t,"ig");return e.toString().replace(r,function(e){return"<span class='highlight'>"+e+"</span>"})}}},f={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wl-search"},[r("el-autocomplete",{attrs:{size:"small","popper-class":"wl-search__input","fetch-suggestions":e.querySearchAsync,placeholder:"请输入用户名"},on:{select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[r("span",{domProps:{innerHTML:e._s(e.resultlight(n.username,e.keyword))}})]}}]),model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[r("template",{slot:"suffix"},[r("i",{staticClass:"el-icon-search"})])],2)],1)},staticRenderFns:[]};var m=r("VU/8")(d,f,!1,function(e){r("nuu8")},null,null).exports,h=r("MUDm"),g={components:{UserList:l,SelectUser:m},props:{id:String},created:function(){this.id&&this.getGroupInfo()},computed:{isNew:function(){return void 0===this.id}},data:function(){return{name:"",groupUserList:[],search:"",breadcrumbData:[{to:"/user/groups",name:"用户组"},{to:"",name:this.id?"编辑":"创建"}]}},methods:{getGroupInfo:function(){var e=this;return u()(s.a.mark(function t(){var r,n,a,u;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.c)(e.id);case 2:r=t.sent,n=r.data,a=n.group_name,u=n.user_info,e.name=a,e.groupUserList=u;case 8:case"end":return t.stop()}},t,e)}))()},handleFilterSelect:function(e){this.groupUserList.push(e)},requestForm:function(){return{group_name:this.name,user_ids:this.groupUserList.map(function(e){return e.id}).join(",")}},submit:function(){var e=this;return u()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.name){t.next=3;break}return e.$message.error("请输入用户组名称"),t.abrupt("return",null);case 3:if(0!==e.groupUserList.length){t.next=6;break}return e.$message.error("请添加用户"),t.abrupt("return",null);case 6:if(console.log(e.requestForm()),!e.isNew){t.next=12;break}return t.next=10,Object(h.a)(e.requestForm());case 10:t.next=14;break;case 12:return t.next=14,Object(h.e)(e.id,e.requestForm());case 14:e.$message({type:"success",message:e.isNew?"添加成功":"修改成功"}),e.$router.push("/user/groups");case 16:case"end":return t.stop()}},t,e)}))()}}},v={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wl-group-edit"},[r("wl-breadcrumb",{attrs:{data:e.breadcrumbData}}),e._v(" "),r("el-form",{staticClass:"wl-group-edit__header",attrs:{inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"用户组"}},[r("el-input",{attrs:{placeholder:"请输入用户组名称",size:"small"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),r("select-user",{attrs:{groupUserList:e.groupUserList},on:{select:e.handleFilterSelect}})],1),e._v(" "),r("div",{staticClass:"wl-group-edit__list"},[0===e.groupUserList.length?r("div",{staticClass:"wl-group-edit__placeholder"},[e._v("请添加用户")]):r("user-list",{model:{value:e.groupUserList,callback:function(t){e.groupUserList=t},expression:"groupUserList"}})],1),e._v(" "),r("el-form",{staticClass:"submit-form",attrs:{inline:!0}},[r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("submit")])],1)],1)],1)},staticRenderFns:[]};var b=r("VU/8")(g,v,!1,function(e){r("P5hJ")},null,null);t.default=b.exports}});
//# sourceMappingURL=2.025754e5fca6403b25a6.js.map