{"version":3,"sources":["webpack:///./src/services/role.service.js","webpack:///src/views/user/src/list/add.user.dialog.vue","webpack:///./src/views/user/src/list/add.user.dialog.vue?ed0c","webpack:///./src/views/user/src/list/add.user.dialog.vue","webpack:///src/views/user/src/list/list.vue","webpack:///./src/views/user/src/list/columns.js","webpack:///./src/views/user/src/list/list.vue?de42","webpack:///./src/views/user/src/list/list.vue"],"names":["role_service_getRoles","params","arguments","length","undefined","config","Object","http_base","extends_default","isRemoveField","add_user_dialog","props","visible","type","Boolean","default","user","data","roles","error","this","initError","form","initForm","updatePasswordRules","pattern","message","trigger","rules","email","required","password","username","role_id","watch","immediate","handler","val","getRoles","target","roleId","computed","isNew","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","_ref","list","wrap","_context","prev","next","sent","stop","onOk","_this2","$refs","validate","valid","sendData","onCancel","$emit","_this3","_callee2","key","_context2","t0","user_service","t1","id","t2","code","list_add_user_dialog","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","width","title","before-close","append-to-body","ref","model","label","label-width","prop","size","auto-complete","value","callback","$$v","$set","expression","_v","disabled","placeholder","_l","role","role_name","slot","on","click","staticRenderFns","list_list","name","components","addUserDialog","__webpack_require__","normalizeComponent","ssrContext","columns","self","minWidth","h","scope","renderTools","call","currentEditUser","addUserDialogVisible","callServe","table","_ref$data","count","page","currentPage","kw","total","search","addUser","edit","row","lock","status","delete","$confirm","confirmButtonText","cancelButtonText","then","deleteUser","catch","_this4","_callee3","_context3","$message","confirm","close","_this5","icon","class","src_list_list","inline","nativeOn","submit","$event","preventDefault","keyup","_k","keyCode","update:visible","list_Component","list_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/7.d048fb5b64617067b69b.js","sourcesContent":["import {get, post, put, Delete} from '@/bases/http.base'\n\n/**\n *\n * 获取角色列表\n * @export\n * @param {any} [params={}]\n * @returns Promise\n */\nexport function getRoles (params = {}, config = {}) {\n  return get('role/', params, {\n    ...config,\n    isRemoveField: true\n  })\n}\n\n/**\n *\n * 获取角色\n * @export\n * @param {any} [params={}]\n * @returns Promise\n */\nexport function getRole (id, params = {}, config = {}) {\n  return get(`role/${id}`, params, config)\n}\n\n/**\n *\n * 新增角色\n * @export\n * @param {any} [params={}]\n * @returns Promise\n */\nexport function addRole (params = {}) {\n  return post('role', params)\n}\n\n/**\n *\n * 更新角色\n * @export\n * @param {any} [params={}]\n * @returns Promise\n */\nexport function updateRole (id, params = {}) {\n  return put(`role/${id}`, params)\n}\n\n/**\n *\n * 删除角色\n * @export\n * @param {any} [params={}]\n * @returns Promise\n */\nexport function deleteRole (id, params = {}) {\n  return Delete(`role/${id}`, params)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/role.service.js","<template>\n    <el-dialog\n        class=\"wl-add-user\"\n        width = \"600px\"\n        :title = \"isNew ? '新增用户' : '编辑用户'\"\n        :visible=\"visible\"\n        :before-close=\"onCancel\"\n        :append-to-body=\"true\">\n        <el-form :model=\"form\" ref=\"form\">\n          <el-form-item label=\"用户名\" label-width=\"120px\" prop=\"username\" :rules=\"rules.username\" :error=\"error.username\">\n            <el-input size=\"small\" v-model=\"form.username\" auto-complete=\"off\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"邮箱\" label-width=\"120px\" prop=\"email\" :rules=\"isNew ? rules.email : []\"  :error=\"error.email\">\n                <el-input size=\"small\" v-model=\"form.email\" auto-complete=\"off\" :disabled=\"!isNew\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"密码\" label-width=\"120px\" prop=\"password\" :rules=\"isNew ? rules.password : updatePasswordRules\" :error=\"error.password\">\n            <el-input size=\"small\" v-model=\"form.password\" auto-complete=\"off\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"角色\" label-width=\"120px\" prop=\"role_id\" :rules=\"rules.role_id\" :error=\"error.role_id\">\n              <el-select size=\"small\" v-model=\"form.role_id\" placeholder=\"请分配角色\" class=\"wl-add-user__option\">\n                  <el-option v-for=\"role in roles\" :key=\"role.id\" :label=\"role.role_name\" :value=\"role.id\"></el-option>\n              </el-select>\n            </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button size=\"small\" type=\"primary\" @click=\"onOk\">确定</el-button>\n          <el-button size=\"small\" @click=\"onCancel\">取消</el-button>\n        </div>\n      </el-dialog>\n</template>\n\n<script>\nimport {addUser, updateUser} from '@/services/user.service'\nimport {getRoles} from '@/services/role.service'\nexport default {\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    user: Object // 用户信息\n  },\n  data () {\n    return {\n      roles: [],\n      error: this.initError(),\n      form: this.initForm(0),\n      updatePasswordRules: [{ pattern: /(?=\\d{0,}[a-zA-Z])(?=[a-zA-Z]{0,}\\d)[a-zA-Z0-9]{6,}/, message: '密码强度不足', trigger: 'blur' }],\n      rules: {\n        email: [\n          { required: true, message: '请输入邮箱地址', trigger: 'blur' },\n          { type: 'email', message: '请输入正确的邮箱地址', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请设置密码', trigger: 'blur' },\n          { pattern: /(?=\\d{0,}[a-zA-Z])(?=[a-zA-Z]{0,}\\d)[a-zA-Z0-9]{6,}/, message: '密码强度不足', trigger: 'blur' }\n        ],\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' }\n        ],\n        role_id: [\n          { required: true, message: '请选择用户角色', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  watch: {\n    visible: {\n      immediate: true,\n      handler (val) {\n        if (val) {\n          this.getRoles({}, {\n            target: '.wl-add-user__option'\n          })\n        }\n      }\n    },\n    user (val) {\n      if (this.visible) {\n        if (val) {\n          let {username, email, password, role_id: roleId} = val // eslint-disable-line\n          this.form.username = username\n          this.form.email = email\n          this.form.password = password\n          this.form.role_id = roleId\n          // this.$refs.form && this.$refs.form.validate()\n        } else {\n          this.form = this.initForm()\n        }\n      }\n    }\n  },\n  computed: {\n    isNew () {\n      return !this.user\n    }\n  },\n  methods: {\n    async getRoles () {\n      let {data: {list}} = await getRoles()\n      this.roles = list\n    },\n    onOk () {\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          this.sendData()\n        } else {\n          return false\n        }\n      })\n    },\n    onCancel () {\n      this.$emit('update:visible')\n      this.$emit('close')\n    },\n    initForm () {\n      return {\n        email: '',\n        password: '',\n        username: '',\n        role_id: null\n      }\n    },\n    initError () {\n      return {\n        email: '',\n        password: '',\n        username: '',\n        role_id: ''\n      }\n    },\n    async sendData () {\n      try {\n        this.error = this.initError()\n        this.isNew && await addUser(this.form)\n        this.isNew || await updateUser(this.user.id, this.form)\n        this.$emit('update:visible')\n        this.$emit('confirm')\n      } catch ({code, message}) {\n        if (message) {\n          for (let key in message) {\n            this.error[key] = message[key][0]\n          }\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import 'scss';\n\n@include b(add-user) {\n    .el-dialog__header {\n        background: #fff;\n        border-bottom: 1px solid #e8e8e8;\n        border-radius: 4px 4px 0 0;\n        color: rgba(0,0,0,.65);\n        padding: 16px 24px;\n    }\n\n    .el-dialog__body {\n        padding-right: 100px;\n    }\n\n    .el-dialog__footer {\n        border-radius: 0 0 4px 4px;\n        border-top: 1px solid #e8e8e8;\n        padding: 10px 16px;\n        text-align: right;\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/user/src/list/add.user.dialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{staticClass:\"wl-add-user\",attrs:{\"width\":\"600px\",\"title\":_vm.isNew ? '新增用户' : '编辑用户',\"visible\":_vm.visible,\"before-close\":_vm.onCancel,\"append-to-body\":true}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"label-width\":\"120px\",\"prop\":\"username\",\"rules\":_vm.rules.username,\"error\":_vm.error.username}},[_c('el-input',{attrs:{\"size\":\"small\",\"auto-complete\":\"off\"},model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, \"username\", $$v)},expression:\"form.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"label-width\":\"120px\",\"prop\":\"email\",\"rules\":_vm.isNew ? _vm.rules.email : [],\"error\":_vm.error.email}},[_c('el-input',{attrs:{\"size\":\"small\",\"auto-complete\":\"off\",\"disabled\":!_vm.isNew},model:{value:(_vm.form.email),callback:function ($$v) {_vm.$set(_vm.form, \"email\", $$v)},expression:\"form.email\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"密码\",\"label-width\":\"120px\",\"prop\":\"password\",\"rules\":_vm.isNew ? _vm.rules.password : _vm.updatePasswordRules,\"error\":_vm.error.password}},[_c('el-input',{attrs:{\"size\":\"small\",\"auto-complete\":\"off\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"角色\",\"label-width\":\"120px\",\"prop\":\"role_id\",\"rules\":_vm.rules.role_id,\"error\":_vm.error.role_id}},[_c('el-select',{staticClass:\"wl-add-user__option\",attrs:{\"size\":\"small\",\"placeholder\":\"请分配角色\"},model:{value:(_vm.form.role_id),callback:function ($$v) {_vm.$set(_vm.form, \"role_id\", $$v)},expression:\"form.role_id\"}},_vm._l((_vm.roles),function(role){return _c('el-option',{key:role.id,attrs:{\"label\":role.role_name,\"value\":role.id}})}))],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.onOk}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.onCancel}},[_vm._v(\"取消\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-12f387f6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/user/src/list/add.user.dialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-12f387f6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./add.user.dialog.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add.user.dialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add.user.dialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-12f387f6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./add.user.dialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/src/list/add.user.dialog.vue\n// module id = null\n// module chunks = ","<template>\n    <div class=\"wl-user-list\">\n            <el-form :inline=\"true\" @submit.native.prevent>\n              <el-form-item>\n                <el-input\n                placeholder=\"请输入内容\"\n                size=\"small\"\n                class=\"search\"\n                @keyup.enter.native=\"search\"\n                v-model=\"value\">\n                <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"search\"></el-button>\n              </el-input>\n              </el-form-item>\n              <el-form-item>\n                <el-button type=\"primary\" size=\"small\" icon=\"el-icon-edit\" @click=\"addUser\">添加</el-button>\n              </el-form-item>\n            </el-form>\n        <wl-table\n            ref=\"table\"\n            :columns=\"columns\"\n            @callServe=\"callServe\"></wl-table>\n        <add-user-dialog :visible.sync=\"addUserDialogVisible\" :user=\"currentEditUser\" @confirm=\"confirm\" @close=\"close\"/>\n    </div>\n</template>\n\n<script>\nimport COLUMNS from './columns'\nimport addUserDialog from './add.user.dialog.vue'\nimport {getUsers, deleteUser, updateUser} from '@/services/user.service'\nexport default {\n  name: 'user-list',\n  components: {\n    addUserDialog\n  },\n  data () {\n    return {\n      value: '',\n      columns: COLUMNS.call(this),\n      currentEditUser: null,\n      addUserDialogVisible: false\n    }\n  },\n  methods: {\n    async callServe (table = this.$refs.table) {\n      let {data: {list, count}} = await getUsers({\n        size: table.page.size,\n        page: table.page.currentPage,\n        kw: this.value\n      })\n      table.page.total = count\n      table.list = list\n    },\n    search () {\n      this.callServe()\n    },\n    addUser () {\n      this.addUserDialogVisible = true\n    },\n    edit (row) {\n      this.addUserDialogVisible = true\n      this.currentEditUser = {\n        ...row\n      }\n    },\n    async lock (row) {\n      await updateUser(row.id, {\n        status: 2,\n        role_id: row.role_id,\n        username: row.username\n      })\n      this.callServe()\n    },\n    delete (row) {\n      this.$confirm('确定删除该用户吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteUser(row)\n      }).catch(() => {})\n    },\n\n    async deleteUser (row) {\n      await deleteUser(row.id)\n      this.callServe()\n      this.$message({\n        type: 'success',\n        message: '删除成功!'\n      })\n    },\n\n    confirm (user) {\n      this.currentEditUser = null\n      this.callServe()\n    },\n\n    close () {\n      this.currentEditUser = null\n    },\n\n    renderTools (scope) {\n      return (\n        <div>\n          <el-button type=\"text\" size=\"small\" icon=\"el-icon-edit\" onClick={() => this.edit({...scope.row})}>编辑</el-button>\n          <el-button type=\"text\" class=\"user-delete\" size=\"small\" icon=\"el-icon-delete\" onClick={() => this.delete({...scope.row})}>删除</el-button>\n          <el-button type=\"text\" size=\"small\" icon=\"wl-icon-lock\" onClick={() => this.lock({...scope.row})}>冻结</el-button>\n        </div>\n      )\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import 'scss';\n\n@include b(user-list) {\n   margin: 20px;\n   box-sizing: border-box;\n   background: #fff;\n   min-height: calc(100% - 40px);\n   padding: 10px;\n\n   .search {\n     width: 300px;\n   }\n\n   .el-table thead th {\n     background-color: $--table-header-background;\n   }\n\n   .user-delete {\n     color: #f56c6c;\n   }\n\n   .el-button {\n     i {\n       font-size: 12px;\n     }\n   }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/user/src/list/list.vue","// import {statusDefine} from '../constant'\nexport default function () {\n  const self = this\n  return [\n    {\n      label: '用户名',\n      width: 250,\n      prop: 'username'\n    },\n    {\n      label: '角色',\n      width: 250,\n      prop: 'role_name'\n      // render (h, scope, methods) {\n      //   return scope.row.role_name\n      //   // return roleDefine[scope.row.role].name\n      // }\n    },\n    {\n      label: '状态',\n      width: 250,\n      prop: 'status'\n      // render (h, scope, methods) {\n      //   return scope.row.status\n      //   // return statusDefine[scope.row.status].name\n      // }\n    },\n    {\n      label: '操作',\n      minWidth: 200,\n      render (h, scope, methods) {\n        return self.renderTools(scope)\n      }\n    }\n  ]\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/user/src/list/columns.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wl-user-list\"},[_c('el-form',{attrs:{\"inline\":true},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',[_c('el-input',{staticClass:\"search\",attrs:{\"placeholder\":\"请输入内容\",\"size\":\"small\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search($event)}},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.search},slot:\"append\"})],1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.addUser}},[_vm._v(\"添加\")])],1)],1),_vm._v(\" \"),_c('wl-table',{ref:\"table\",attrs:{\"columns\":_vm.columns},on:{\"callServe\":_vm.callServe}}),_vm._v(\" \"),_c('add-user-dialog',{attrs:{\"visible\":_vm.addUserDialogVisible,\"user\":_vm.currentEditUser},on:{\"update:visible\":function($event){_vm.addUserDialogVisible=$event},\"confirm\":_vm.confirm,\"close\":_vm.close}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-578a23a2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/user/src/list/list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-578a23a2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./list.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-578a23a2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/src/list/list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}