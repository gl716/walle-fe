{"version":3,"sources":["webpack:///./src/views/user/src/roles/constant.js","webpack:///src/views/user/src/roles/role.edit.vue","webpack:///./src/views/user/src/roles/role.edit.vue?7889","webpack:///./src/views/user/src/roles/role.edit.vue"],"names":["roleData","module","controller","permission","permissions","id","name","role_edit","props","String","watch","val","_this","this","asyncToGenerator_default","regenerator_default","a","mark","_callee","_ref","_ref$data","role_name","access_ids","wrap","_context","prev","next","Object","role_service","sent","data","stop","computed","isNew","breadcrumbData","to","rules","required","message","trigger","methods","objectSpanMethod","_ref2","row","column","rowIndex","columnIndex","rowspan","colspan","handleCheckedPermissionChange","console","log","submit","_this2","$refs","form","validate","valid","sendData","requestData","permission_ids","_this3","_callee2","_context2","error","initError","t0","t1","user","roles_role_edit","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","ref","inline","nativeOn","$event","preventDefault","placeholder","size","model","value","callback","$$v","expression","staticStyle","width","margin-top","span-method","show-header","border","prop","scopedSlots","_u","key","fn","on","change","$set","_l","label","_s","type","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/12.fd38e098dff92ef2c207.js","sourcesContent":["export const roleData = [\n  {\n    module: '用户中心',\n    controller: '角色',\n    permission: []\n  },\n  {\n    module: '用户中心',\n    controller: '用户',\n    permission: []\n  },\n  {\n    module: '用户中心',\n    controller: '用户组',\n    permission: []\n  },\n  {\n    module: '配置中心',\n    controller: '项目',\n    permission: []\n  },\n  {\n    module: '配置中心',\n    controller: '环境',\n    permission: []\n  },\n  {\n    module: '配置中心',\n    controller: '上线单',\n    permission: []\n  }\n]\n\nexport const permissions = [{\n  id: 0,\n  name: '查看'\n},\n{\n  id: 1,\n  name: '添加'\n},\n{\n  id: 2,\n  name: '修改'\n},\n{\n  id: 3,\n  name: '删除'\n}]\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/user/src/roles/constant.js","<template>\n    <div class=\"wl-role-edit\">\n        <wl-breadcrumb :data=\"breadcrumbData\"></wl-breadcrumb>\n        <el-form :inline=\"true\" @submit.native.prevent ref=\"form\">\n             <el-form-item :rules=\"rules.name\">\n                <el-input\n                placeholder=\"角色名称\"\n                size=\"small\"\n                v-model=\"name\"/>\n            </el-form-item>\n        </el-form>\n        <el-table\n        :data=\"data\"\n        :span-method=\"objectSpanMethod\"\n        :show-header=\"false\"\n        border\n        style=\"width: 100%; margin-top: 20px\">\n            <el-table-column\n                prop=\"module\"\n                width=\"180\">\n            </el-table-column>\n            <el-table-column\n                prop=\"controller\"\n                width=\"180\">\n            </el-table-column>\n            <el-table-column>\n                <template slot-scope=\"{row}\">\n                    <el-checkbox-group v-model=\"row.permission\" @change=\"handleCheckedPermissionChange(row)\">\n                        <el-checkbox v-for=\"permission in permissions\" :label=\"permission.id\" :key=\"permission.id\">{{permission.name}}</el-checkbox>\n                    </el-checkbox-group>\n                </template>\n            </el-table-column>\n        </el-table>\n        <el-form :inline=\"true\" class=\"submit-form\">\n            <el-form-item>\n               <el-button type=\"primary\" size=\"small\" @click=\"submit\">submit</el-button>\n            </el-form-item>\n        </el-form>\n    </div>\n</template>\n\n<script>\nimport {roleData, permissions} from './constant'\nimport {addRole, updateRole, getRole} from '@/services/role.service'\nexport default {\n  props: {\n    id: String\n  },\n  watch: {\n    async id (val) {\n      let {data: {role_name, access_ids}} = await getRole(val) // eslint-disable-line\n      this.name = role_name // eslint-disable-line\n      this.data = access_ids // eslint-disable-line\n    }\n  },\n  computed: {\n    isNew () {\n      return !this.id\n    }\n  },\n  data () {\n    return {\n      data: roleData,\n      permissions: permissions,\n      name: '',\n      breadcrumbData: [\n        {\n          to: '/user/roles',\n          name: '角色'\n        },\n        {\n          to: '',\n          name: this.id ? '编辑' : '创建'\n        }\n      ],\n      rules: {\n        name: [\n          { required: true, message: '请输入角色名称', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    objectSpanMethod ({ row, column, rowIndex, columnIndex }) {\n      if (columnIndex === 0) {\n        if (rowIndex % 3 === 0) {\n          return {\n            rowspan: 3,\n            colspan: 1\n          }\n        } else {\n          return {\n            rowspan: 0,\n            colspan: 0\n          }\n        }\n      }\n    },\n    handleCheckedPermissionChange (row) {\n      console.log(row)\n    },\n    submit () {\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          this.sendData()\n        } else {\n          return false\n        }\n      })\n    },\n    requestData () {\n      return {\n        role_name: this.name,\n        permission_ids: this.data\n      }\n    },\n    async sendData () {\n      this.error = this.initError()\n      this.isNew && await addRole(this.requestData())\n      this.isNew || await updateRole(this.user.id, this.requestData())\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import 'scss';\n\n@include b(role-edit) {\n   margin: 20px;\n   box-sizing: border-box;\n   background: #fff;\n   min-height: calc(100% - 40px);\n   padding: 10px;\n\n   .el-input {\n     width: 300px;\n   }\n\n   .el-table {\n      margin-top: 0 !important;\n      margin-bottom: 20px;\n   }\n\n   .submit-form {\n       text-align: right;\n   }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/user/src/roles/role.edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wl-role-edit\"},[_c('wl-breadcrumb',{attrs:{\"data\":_vm.breadcrumbData}}),_vm._v(\" \"),_c('el-form',{ref:\"form\",attrs:{\"inline\":true},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',{attrs:{\"rules\":_vm.rules.name}},[_c('el-input',{attrs:{\"placeholder\":\"角色名称\",\"size\":\"small\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}})],1)],1),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\",\"margin-top\":\"20px\"},attrs:{\"data\":_vm.data,\"span-method\":_vm.objectSpanMethod,\"show-header\":false,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"module\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"controller\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('el-checkbox-group',{on:{\"change\":function($event){_vm.handleCheckedPermissionChange(row)}},model:{value:(row.permission),callback:function ($$v) {_vm.$set(row, \"permission\", $$v)},expression:\"row.permission\"}},_vm._l((_vm.permissions),function(permission){return _c('el-checkbox',{key:permission.id,attrs:{\"label\":permission.id}},[_vm._v(_vm._s(permission.name))])}))]}}])})],1),_vm._v(\" \"),_c('el-form',{staticClass:\"submit-form\",attrs:{\"inline\":true}},[_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.submit}},[_vm._v(\"submit\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-11cffd62\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/user/src/roles/role.edit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-11cffd62\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./role.edit.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./role.edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./role.edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-11cffd62\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./role.edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/src/roles/role.edit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}