webpackJsonp([12],{"3OaP":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Xxa5"),a=n.n(r),s=n("exGp"),o=n.n(s),i=[{module:"用户中心",controller:"角色",permission:[]},{module:"用户中心",controller:"用户",permission:[]},{module:"用户中心",controller:"用户组",permission:[]},{module:"配置中心",controller:"项目",permission:[]},{module:"配置中心",controller:"环境",permission:[]},{module:"配置中心",controller:"上线单",permission:[]}],l=[{id:0,name:"查看"},{id:1,name:"添加"},{id:2,name:"修改"},{id:3,name:"删除"}],c=n("St0J"),u={props:{id:String},watch:{id:function(e){var t=this;return o()(a.a.mark(function n(){var r,s,o,i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(c.c)(e);case 2:r=n.sent,s=r.data,o=s.role_name,i=s.access_ids,t.name=o,t.data=i;case 8:case"end":return n.stop()}},n,t)}))()}},computed:{isNew:function(){return!this.id}},data:function(){return{data:i,permissions:l,name:"",breadcrumbData:[{to:"/user/roles",name:"角色"},{to:"",name:this.id?"编辑":"创建"}],rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}]}}},methods:{objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex;if(0===e.columnIndex)return t%3==0?{rowspan:3,colspan:1}:{rowspan:0,colspan:0}},handleCheckedPermissionChange:function(e){console.log(e)},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.sendData()})},requestData:function(){return{role_name:this.name,permission_ids:this.data}},sendData:function(){var e=this;return o()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.error=e.initError(),t.t0=e.isNew,!t.t0){t.next=5;break}return t.next=5,Object(c.a)(e.requestData());case 5:if(t.t1=e.isNew,t.t1){t.next=9;break}return t.next=9,Object(c.e)(e.user.id,e.requestData());case 9:case"end":return t.stop()}},t,e)}))()}}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wl-role-edit"},[n("wl-breadcrumb",{attrs:{data:e.breadcrumbData}}),e._v(" "),n("el-form",{ref:"form",attrs:{inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{rules:e.rules.name}},[n("el-input",{attrs:{placeholder:"角色名称",size:"small"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),e._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.data,"span-method":e.objectSpanMethod,"show-header":!1,border:""}},[n("el-table-column",{attrs:{prop:"module",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{prop:"controller",width:"180"}}),e._v(" "),n("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-checkbox-group",{on:{change:function(t){e.handleCheckedPermissionChange(r)}},model:{value:r.permission,callback:function(t){e.$set(r,"permission",t)},expression:"row.permission"}},e._l(e.permissions,function(t){return n("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}))]}}])})],1),e._v(" "),n("el-form",{staticClass:"submit-form",attrs:{inline:!0}},[n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("submit")])],1)],1)],1)},staticRenderFns:[]};var d=n("VU/8")(u,m,!1,function(e){n("XOgg")},null,null);t.default=d.exports},XOgg:function(e,t){}});
//# sourceMappingURL=12.fd38e098dff92ef2c207.js.map