{"version":3,"sources":["webpack:///./src/services/space.service.js","webpack:///src/views/space/src/add.space.dialog.vue","webpack:///./src/views/space/src/add.space.dialog.vue?e3a9","webpack:///./src/views/space/src/add.space.dialog.vue","webpack:///src/views/space/src/space.list.vue","webpack:///./src/views/space/src/columns.js","webpack:///./src/views/space/src/space.list.vue?16ed","webpack:///./src/views/space/src/space.list.vue"],"names":["getSpaces","params","arguments","length","undefined","Object","http_base","isRemoveField","target","addSpace","headers","content-type","transformRequest","data","lib_default","a","stringify","updateSpace","id","put","space_service_deleteSpace","Delete","add_space_dialog","props","visible","type","Boolean","default","space","users","error","this","initError","form","initForm","rules","name","required","message","trigger","user_id","watch","immediate","handler","val","assign_default","extends_default","getUsers","computed","isNew","methods","_this","asyncToGenerator_default","regenerator_default","mark","_callee","_ref","list","wrap","_context","prev","next","user_service","sent","stop","onOk","_this2","$refs","validate","valid","sendData","onCancel","$emit","_this3","_callee2","key","_context2","console","log","t0","t1","t2","code","src_add_space_dialog","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","width","title","before-close","append-to-body","ref","model","label","label-width","prop","size","auto-complete","value","callback","$$v","$set","expression","_v","placeholder","_l","user","username","slot","on","click","staticRenderFns","space_list","components","addSpaceDialog","__webpack_require__","normalizeComponent","ssrContext","enableCreate","columns","self","minWidth","h","scope","renderTools","call","currentEditSpace","addSpaceDialogVisible","callServe","table","_ref$data","count","enable_create","page","currentPage","kw","total","search","edit","row","delete","$confirm","confirmButtonText","cancelButtonText","then","deleteSpace","catch","$message","confirm","close","renderEditTool","_this4","enable_update","icon","renderDeleteTool","_this5","enable_delete","class","src_space_list","inline","nativeOn","submit","$event","preventDefault","keyup","_k","keyCode","_e","update:visible","space_list_Component","space_list_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/5.4dd20f21c37bf9441b32.js","sourcesContent":["import {get, post, put, Delete} from '@/bases/http.base'\nimport qs from 'qs'\n\n/**\n *\n * 获取空间列表\n * @export\n * @param {any} [params={}]\n * @returns Promise\n */\nexport function getSpaces (params = {}) {\n  return get('space/', params, {\n    isRemoveField: true,\n    target: '.wl-table'\n  })\n}\n\n/**\n *\n * 新增空间\n * @export\n * @param {any} [params={}]\n * @returns Promise\n */\nexport function addSpace (params = {}) {\n  return post('space/', params, {\n    headers: {\n      'content-type': 'multipart/form-data'\n    },\n    transformRequest: [function (data) {\n      return qs.stringify(data)\n    }]\n  })\n}\n\n/**\n *\n * 更新空间\n * @export\n * @param {any} [params={}]\n * @returns Promise\n */\nexport function updateSpace (id, params = {}) {\n  return put(`space/${id}`, params, {\n    target: '.wl-table',\n    headers: {\n      'content-type': 'multipart/form-data'\n    },\n    transformRequest: [function (data) {\n      return qs.stringify(data)\n    }]\n  })\n}\n\n/**\n *\n * 删除空间\n * @export\n * @param {any} [params={}]\n * @returns Promise\n */\nexport function deleteSpace (id, params = {}) {\n  return Delete(`space/${id}`, params)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/space.service.js","<template>\n    <el-dialog\n        class=\"wl-add-space\"\n        width = \"600px\"\n        :title = \"isNew ? '新增空间' : '编辑空间'\"\n        :visible=\"visible\"\n        :before-close=\"onCancel\"\n        :append-to-body=\"true\">\n        <el-form :model=\"form\" ref=\"form\">\n          <el-form-item label=\"空间名称\" label-width=\"120px\" prop=\"name\" :rules=\"rules.name\" :error=\"error.name\">\n            <el-input size=\"small\" v-model=\"form.name\" auto-complete=\"off\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"所属人\" label-width=\"120px\" prop=\"user_id\" :rules=\"rules.user_id\" :error=\"error.user_id\">\n              <el-select size=\"small\" v-model=\"form.user_id\" placeholder=\"请分配用户\" class=\"wl-add-space__option\">\n                  <el-option v-for=\"user in users\" :key=\"user.id\" :label=\"user.username\" :value=\"user.id\"></el-option>\n              </el-select>\n            </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button size=\"small\" type=\"primary\" @click=\"onOk\">确定</el-button>\n          <el-button size=\"small\" @click=\"onCancel\">取消</el-button>\n        </div>\n      </el-dialog>\n</template>\n\n<script>\nimport {addSpace, updateSpace} from '@/services/space.service'\nimport {getUsers} from '@/services/user.service'\nexport default {\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    space: Object // 用户信息\n  },\n  data () {\n    return {\n      users: [],\n      error: this.initError(),\n      form: this.initForm(),\n      rules: {\n        name: [\n          { required: true, message: '请输入用户名', trigger: 'blur' }\n        ],\n        user_id: [\n          { required: true, message: '请选择用户角色', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  watch: {\n    visible: {\n      immediate: true,\n      handler (val) {\n        if (val) {\n          Object.assign(this.form, {\n            ...this.initForm(0)\n          })\n          this.getUsers({}, {\n            target: '.wl-add-space__option'\n          })\n        }\n      }\n    },\n    space (val) {\n      if (this.visible) {\n        if (val) {\n          let {name, user_id} = val // eslint-disable-line\n          this.form.name = name\n          this.form.user_id = user_id // eslint-disable-line\n        } else {\n          this.form = this.initForm()\n        }\n      }\n    }\n  },\n  computed: {\n    isNew () {\n      return !this.space\n    }\n  },\n  methods: {\n    async getUsers () {\n      let {data: {list}} = await getUsers()\n      this.users = list\n    },\n    onOk () {\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          this.sendData()\n        } else {\n          return false\n        }\n      })\n    },\n    onCancel () {\n      this.$emit('update:visible')\n      this.$emit('close')\n    },\n    initForm () {\n      return {\n        name: '',\n        user_id: null\n      }\n    },\n    initError () {\n      return {\n        name: '',\n        user_id: ''\n      }\n    },\n    async sendData () {\n      try {\n        this.error = this.initError()\n        console.log(this.form)\n        this.isNew && await addSpace(this.form)\n        this.isNew || await updateSpace(this.space.id, this.form)\n        this.$emit('update:visible')\n        this.$emit('confirm')\n      } catch ({code, message}) {\n        if (message) {\n          for (let key in message) {\n            this.error[key] = message[key][0]\n          }\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import 'scss';\n\n@include b(add-space) {\n    .el-dialog__header {\n        background: #fff;\n        border-bottom: 1px solid #e8e8e8;\n        border-radius: 4px 4px 0 0;\n        color: rgba(0,0,0,.65);\n        padding: 16px 24px;\n    }\n\n    .el-dialog__body {\n        padding-right: 100px;\n    }\n\n    .el-dialog__footer {\n        border-radius: 0 0 4px 4px;\n        border-top: 1px solid #e8e8e8;\n        padding: 10px 16px;\n        text-align: right;\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/space/src/add.space.dialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{staticClass:\"wl-add-space\",attrs:{\"width\":\"600px\",\"title\":_vm.isNew ? '新增空间' : '编辑空间',\"visible\":_vm.visible,\"before-close\":_vm.onCancel,\"append-to-body\":true}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"空间名称\",\"label-width\":\"120px\",\"prop\":\"name\",\"rules\":_vm.rules.name,\"error\":_vm.error.name}},[_c('el-input',{attrs:{\"size\":\"small\",\"auto-complete\":\"off\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"所属人\",\"label-width\":\"120px\",\"prop\":\"user_id\",\"rules\":_vm.rules.user_id,\"error\":_vm.error.user_id}},[_c('el-select',{staticClass:\"wl-add-space__option\",attrs:{\"size\":\"small\",\"placeholder\":\"请分配用户\"},model:{value:(_vm.form.user_id),callback:function ($$v) {_vm.$set(_vm.form, \"user_id\", $$v)},expression:\"form.user_id\"}},_vm._l((_vm.users),function(user){return _c('el-option',{key:user.id,attrs:{\"label\":user.username,\"value\":user.id}})}))],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.onOk}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.onCancel}},[_vm._v(\"取消\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4377e57a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/space/src/add.space.dialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4377e57a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./add.space.dialog.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add.space.dialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add.space.dialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4377e57a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./add.space.dialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/space/src/add.space.dialog.vue\n// module id = null\n// module chunks = ","<template>\n    <div class=\"wl-space-list\">\n            <el-form :inline=\"true\" @submit.native.prevent>\n              <el-form-item>\n                <el-input\n                placeholder=\"请输入内容\"\n                size=\"small\"\n                class=\"search\"\n                @keyup.enter.native=\"search\"\n                v-model=\"value\">\n                <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"search\"></el-button>\n              </el-input>\n              </el-form-item>\n              <el-form-item v-if=\"enableCreate\">\n                <el-button type=\"primary\" size=\"small\" icon=\"el-icon-edit\" @click=\"addSpace\">添加</el-button>\n              </el-form-item>\n            </el-form>\n        <wl-table\n            ref=\"table\"\n            :columns=\"columns\"\n            @callServe=\"callServe\"></wl-table>\n        <add-space-dialog :visible.sync=\"addSpaceDialogVisible\" :space=\"currentEditSpace\" @confirm=\"confirm\" @close=\"close\"/>\n    </div>\n</template>\n\n<script>\nimport COLUMNS from './columns'\nimport addSpaceDialog from './add.space.dialog.vue'\nimport {getSpaces, deleteSpace} from '@/services/space.service'\nexport default {\n  name: 'space-list',\n  components: {\n    addSpaceDialog\n  },\n  data () {\n    return {\n      enableCreate: false,\n      value: '',\n      columns: COLUMNS.call(this),\n      currentEditSpace: null,\n      addSpaceDialogVisible: false\n    }\n  },\n  methods: {\n    async callServe (table = this.$refs.table) {\n      let {data: {list, count, enable_create}} = await getSpaces({ // eslint-disable-line\n        size: table.page.size,\n        page: table.page.currentPage,\n        kw: this.value\n      })\n      this.enableCreate = enable_create // eslint-disable-line\n      table.page.total = count\n      table.list = list\n    },\n    search () {\n      this.callServe()\n    },\n    addSpace () {\n      this.addSpaceDialogVisible = true\n    },\n    edit (row) {\n      this.addSpaceDialogVisible = true\n      this.currentEditSpace = {\n        ...row\n      }\n    },\n    delete (row) {\n      this.$confirm('确定删除该空间吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteSpace(row)\n      }).catch(() => {})\n    },\n\n    async deleteSpace (row) {\n      await deleteSpace(row.id)\n      this.callServe()\n      this.$message({\n        type: 'success',\n        message: '删除成功!'\n      })\n    },\n\n    confirm (user) {\n      this.currentEditSpace = null\n      this.callServe()\n    },\n\n    close () {\n      this.currentEditSpace = null\n    },\n\n    renderEditTool (row) {\n      if (row.enable_update) {\n        return <el-button type=\"text\" size=\"small\" icon=\"el-icon-edit\" onClick={() => this.edit({...row})}>编辑</el-button>\n      } else {\n        return null\n      }\n    },\n\n    renderDeleteTool (row) {\n      if (row.enable_delete) {\n        return <el-button type=\"text\" class=\"user-delete\" size=\"small\" icon=\"el-icon-delete\" onClick={() => this.delete({...row})}>删除</el-button>\n      } else {\n        return null\n      }\n    },\n\n    renderTools (scope) {\n      return (\n        <div>\n          {this.renderEditTool(scope.row)}\n          {this.renderDeleteTool(scope.row)}\n        </div>\n      )\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import 'scss';\n\n@include b(space-list) {\n   margin: 20px;\n   box-sizing: border-box;\n   background: #fff;\n   min-height: calc(100% - 40px);\n   padding: 10px;\n\n   .search {\n     width: 300px;\n   }\n\n   .el-table thead th {\n     background-color: $--table-header-background;\n   }\n\n   .user-delete {\n     color: #f56c6c;\n   }\n\n   .el-button {\n     i {\n       font-size: 12px;\n     }\n   }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/space/src/space.list.vue","// import {statusDefine} from '../constant'\nexport default function () {\n  const self = this\n  return [\n    {\n      label: '空间名',\n      width: 250,\n      prop: 'name'\n    },\n    {\n      label: '空间所属人',\n      width: 250,\n      prop: 'user_name'\n      // render (h, scope, methods) {\n      //   return scope.row.role_name\n      //   // return roleDefine[scope.row.role].name\n      // }\n    },\n    {\n      label: '创建时间',\n      width: 250,\n      prop: 'created_at'\n      // render (h, scope, methods) {\n      //   return scope.row.status\n      //   // return statusDefine[scope.row.status].name\n      // }\n    },\n    {\n      label: '操作',\n      minWidth: 200,\n      render (h, scope, methods) {\n        return self.renderTools(scope)\n      }\n    }\n  ]\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/space/src/columns.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wl-space-list\"},[_c('el-form',{attrs:{\"inline\":true},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',[_c('el-input',{staticClass:\"search\",attrs:{\"placeholder\":\"请输入内容\",\"size\":\"small\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search($event)}},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.search},slot:\"append\"})],1)],1),_vm._v(\" \"),(_vm.enableCreate)?_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.addSpace}},[_vm._v(\"添加\")])],1):_vm._e()],1),_vm._v(\" \"),_c('wl-table',{ref:\"table\",attrs:{\"columns\":_vm.columns},on:{\"callServe\":_vm.callServe}}),_vm._v(\" \"),_c('add-space-dialog',{attrs:{\"visible\":_vm.addSpaceDialogVisible,\"space\":_vm.currentEditSpace},on:{\"update:visible\":function($event){_vm.addSpaceDialogVisible=$event},\"confirm\":_vm.confirm,\"close\":_vm.close}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3624a882\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/space/src/space.list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3624a882\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./space.list.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./space.list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./space.list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3624a882\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./space.list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/space/src/space.list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}